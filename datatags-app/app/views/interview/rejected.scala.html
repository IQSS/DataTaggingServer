@import edu.harvard.iq.datatags.externaltexts.Localization
@import edu.harvard.iq.datatags.model.graphs.nodes.RejectNode
@import Helpers.{o2o, renderMarkdown}
@(pmvKit: PolicyModelVersionKit,
  node: RejectNode,
  requestedInterview: Option[RequestedInterviewSession],
  answerHistory: Seq[AnswerRecord],
  loc:Option[Localization]
)(implicit req:Request[_])

@templates.bsNavBar("Dataset Rejected", 'tag) {
  <div class="row my-2">
    <div class="col">
      @comps.rejectPanel(node, pmvKit, loc, answerHistory, pmvKit.dbData.commentingStatus != CommentingStatus.Closed)
    </div>
  </div>
  <div class="row my-2">
    <div class="col">
      <div class="card">
        <div class="card-header">
          Answer History
        </div>
        <div class="card-body">
          @comps.answerHistory(answerHistory, pmvKit.id, false, pmvKit.serializer, loc)
        </div>
      </div>
    </div>
  </div>

  <div class="row my-2">
    <div class="col text-center">

      @requestedInterview match {
        case Some(reqInt) => {
          <p>@reqInt.returnButtonTitle</p>
          <form action="@routes.RequestedInterviewCtrl.unacceptableDataset(reqInt.key, node.getReason)" method="POST">
            <button class="btn btn-primary" type="submit">@reqInt.returnButtonText</button>
          </form>
        }
        case None => {
          <a href="@routes.InterviewCtrl.interviewIntro(pmvKit.id.modelId, pmvKit.id.version)" class="btn btn-primary">Start Again</a>
        }
      }
    </div>
  </div>
}