@(vpm:VersionedPolicyModel, versions:Seq[PolicyModelVersionKit] )(implicit req:Request[_])


@templates.bsNavBar(vpm.title, 'frontEnd ) {

  <div class="row">
    <div class="col-md-8">
      <a href="@routes.Application.publicModelCatalog()"><i class="fa fa-list"></i> Models List</a>
      <h3>
        @vpm.title
      </h3>
      <h6><code>@vpm.id</code></h6>
    </div>
    @if( versions.nonEmpty ) {
      <div class="col-md-4">
        <div class="text-right">
          <a href="@routes.InterviewCtrl.interviewIntro(versions.head.dbData.parentId, versions.head.dbData.version)"
          class="btn btn-lg btn-primary">
            <i class="fa fa-play"></i> Run Latest Version
          </a>
        </div>
      </div>
    }
  </div>

  @if( vpm.note.trim.nonEmpty ) {
    <div class="row">
      <div class="col-md-12">
        @vpm.note
      </div>
    </div>
  }

  <div class="row">
    <div class="col-md-12">
      @if( versions.isEmpty ) {
        <div class="noData">
          This model currently has no published versions.
        </div>
      } else {
        <h4>
          All Versions
        </h4>
        <table class="table">
          <thead>
            <tr>
              <th>#</th>
              <th>Title</th>
              <th>Last Update</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            @for( v <- versions ) {
              <tr>
                <td>@v.dbData.version</td>
                <td>
                  @if(v.model != null) {
                    @v.model.getMetadata.getTitle
                    @if(Helpers.hasContent(v.model.getMetadata.getSubTitle)) {
                      <small>@v.model.getMetadata.getSubTitle</small>
                    }
                  } else {
                    <div class="noData">Missing Model</div>
                  }
                </td>
                <td>@v.dbData.lastUpdate</td>
                <td>
                  @if(v.canRun){
                    <a class="btn btn-primary btn-sm" href="@routes.InterviewCtrl.interviewIntro(v.dbData.parentId, v.dbData.version)"><i class="fa fa-play"></i> Run</a>
                  }
                </td>
              </tr>
              @if(v.dbData.note.trim.nonEmpty){
                <tr>
                  <td>&nbsp;</td>
                  <td colspan="3" class="noteTd">@v.dbData.note</td>
                  <td>&nbsp;</td>
                </tr>
              }

            }
          </tbody>
        </table>
      }
    </div>
  </div>
}